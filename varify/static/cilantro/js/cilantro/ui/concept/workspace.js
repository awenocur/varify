var __hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},__bind=function(t,e){return function(){return t.apply(e,arguments)}};define(["underscore","backbone","marionette","loglevel","../core","../base","../welcome","../field","../charts","./form","./info"],function(t,e,i,n,o,s,r,a,l,c){var u,h,p,d,f;return p=function(e){var i,n,s,r,a,l,c;return s=null,r=null,a=[{}],l=o.config.get("concepts.instances."+e.id+".form"),t.isFunction(l)?s=l:t.isString(l)?r=l:t.isObject(l)&&a.push(l),c=o.config.get("concepts.types."+e.get("type")+".form"),!s&&t.isFunction(c)?s=c:!r&&t.isString(c)?r=c:a.push(c),n=o.config.get("concepts.defaults.form"),!s&&t.isFunction(n)?s=n:!r&&t.isString(n)?r=n:a.push(n),!r&&(i=o.config.get("concepts.forms."+e.id))?(r=i.module,a=i.options,{module:r,options:a}):(a=t.defaults.apply(null,a),{view:s,module:r,options:a})},u=function(t){function e(){return d=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.template="concept/error",e}(s.ErrorView),h=function(e){function i(){return this.createView=__bind(this.createView,this),this.showItem=__bind(this.showItem,this),f=i.__super__.constructor.apply(this,arguments)}return __extends(i,e),i.prototype.className="concept-workspace",i.prototype.template="concept/workspace",i.prototype.itemView=c.ConceptForm,i.prototype.errorView=u,i.prototype.regions={main:".main-region"},i.prototype.regionViews={main:r.Welcome},i.prototype.initialize=function(){if(this.data={},!(this.data.concepts=this.options.concepts))throw new Error("concept collection required");if(!(this.data.context=this.options.context))throw new Error("context model required");return o.on(o.CONCEPT_FOCUS,this.showItem)},i.prototype._ensureModel=function(t){return t instanceof o.models.Concept||(t=this.data.concepts.get(t)),t},i.prototype.showItem=function(e){var i,o,s=this;return e=this._ensureModel(e),this.currentView&&e.id===this.currentView.model.id?void 0:(i={model:e,context:this.data.context},o=p(e),i=t.extend(i,o.options),o.module?require([o.module],function(t){return s.createView(t,i)},function(t){return s.showErrorView(e),n.debug(t)}):this.createView(o.view||this.itemView,i))},i.prototype.createView=function(t,e){var i,n;try{return n=new t(e),this.setView(n)}catch(s){if(i=s,this.showErrorView(e.model),o.config.get("debug"))throw i}},i.prototype.showErrorView=function(t){var e;return e=new this.errorView({model:t}),this.currentView=e,this.main.show(e)},i.prototype.setView=function(t){return this.currentView=t,this.main.show(t)},i.prototype.onRender=function(){return this.main.show(new this.regionViews.main)},i}(i.Layout),{ConceptWorkspace:h}});
//@ sourceMappingURL=workspace.js.map