var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define(["underscore","./base","../button","../../constants"],function(t,e,n,i){var o,r;return o=function(e){function o(){return this.readMinMaxStats=__bind(this.readMinMaxStats,this),r=o.__super__.constructor.apply(this,arguments)}return __extends(o,e),o.prototype.template="controls/range/layout",o.prototype.events={"keyup .range-lower,.range-upper":"_change","change .btn-select":"_change","click .range-help-button":"toggleHelpText"},o.prototype.ui={operatorSelect:".btn-select",lowerBound:".range-lower",upperBound:".range-upper",help:".help-block"},o.prototype.initialize=function(){return this.model.stats.on("reset",this.readMinMaxStats),this.model.stats.length>0&&this.readMinMaxStats(),this._change=t.debounce(this.change,i.INPUT_DELAY)},o.prototype.onRender=function(){return this.operatorSelect=new n.ButtonSelect({collection:[{value:"range",label:"between",selected:!0},{value:"-range",label:"not between"}]}),this.operatorSelect.render().$el.prependTo(this.$el),this.ui.help.hide(),this.updateBounds()},o.prototype.parseMinStat=function(t){return t},o.prototype.parseMaxStat=function(t){return t},o.prototype.readMinMaxStats=function(){var t,e;return e=this.model.stats.findWhere({key:"min"}),t=this.model.stats.findWhere({key:"max"}),null!=e&&(this.minLowerBound=this.parseMinStat(e.get("value"))),null!=t&&(this.maxUpperBound=this.parseMaxStat(t.get("value"))),this.updateBounds()},o.prototype.toggleHelpText=function(t){return this.ui.help.toggle(),t.preventDefault()},o.prototype.updateBounds=function(){return null==this.isClosed||this.isClosed||(null!=this.minLowerBound&&this.setLowerBoundPlaceholder(this.minLowerBound),null==this.maxUpperBound)?void 0:this.setUpperBoundPlaceholder(this.maxUpperBound)},o.prototype.getField=function(){return this.model.id},o.prototype.getOperator=function(){var t,e,n,i;return t=this.ui.lowerBound.val(),i=this.ui.upperBound.val(),e=this.operatorSelect.getSelection(),n="range"!==e,e=t&&i?e:t?n?"lte":"gte":i?n?"gte":"lte":null},o.prototype.getLowerBoundValue=function(){return this.ui.lowerBound.val()},o.prototype.getUpperBoundValue=function(){return this.ui.upperBound.val()},o.prototype.getValue=function(){var t,e,n;return t=this.getLowerBoundValue(),e=this.getUpperBoundValue(),n=null!=t&&null!=e?[t,e]:null!=t?t:null!=e?e:null},o.prototype.setOperator=function(t){return"-range"!==t&&(t="range"),this.operatorSelect.setSelection(t)},o.prototype.setLowerBoundPlaceholder=function(t){return this.ui.lowerBound.prop("placeholder",t)},o.prototype.setLowerBoundValue=function(t){return this.ui.lowerBound.val(t)},o.prototype.setUpperBoundPlaceholder=function(t){return this.ui.upperBound.prop("placeholder",t)},o.prototype.setUpperBoundValue=function(t){return this.ui.upperBound.val(t)},o.prototype.set=function(e){var n;if(this.setOperator(e.operator),this.setUpperBoundValue(),this.setLowerBoundValue(),n=e.value,t.isArray(n)){if(null!=n[0]&&this.setLowerBoundValue(n[0]),null!=n[1])return this.setUpperBoundValue(n[1])}else if(null!=n)return"gte"===e.operator?this.setLowerBoundValue(n):this.setUpperBoundValue(n)},o}(e.Control),{RangeControl:o}});
//@ sourceMappingURL=range.js.map