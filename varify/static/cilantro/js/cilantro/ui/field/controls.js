define(["underscore","marionette","loglevel","../../core","../base","../controls"],function(t,e,n,i,o,r){var s=function(t,e){e&&(e.listenTo(t,"change",function(t,n){e.set(n)}),t.listenTo(e,"change",function(e){this._changing||t.set(e.toJSON())}))},a=o.ErrorView.extend({message:"Error rendering field control"}),l=o.LoadView.extend({message:"Loading and rendering field controls..."}),c=e.View.extend({emptyView:l,errorView:a,render:function(){var t=this;return this.collection.each(function(e,n){t.initControl(e,n)}),this.el},initControl:function(e,i){var o=e.get("context"),s=t.extend({},{model:e.get("model")},e.get("options")),a=e.get("control"),l=r.get(a);if(t.isFunction(l))this.renderControl(l,o,i,s);else{var c=this;require([l||a],function(t){c.renderControl(t,o,i,s)},function(t){c.showErrorView(),n.debug(t)})}},renderControl:function(t,e,n,o){var r=this,a=new t(o);a.render(),a.on({beforeready:function(){this.set(e.toJSON()),s(this,e)},error:function(){this.showErrorView()}}),a.ready(!0),i.dom.insertAt(r.$el,n,a.el)},showErrorView:function(){var t=new this.errorView;t.render(),this.$el.html(t.el)}});return{FieldControls:c}});
//@ sourceMappingURL=controls.js.map