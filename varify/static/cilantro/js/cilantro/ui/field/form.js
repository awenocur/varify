var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},__bind=function(t,e){return function(){return t.apply(e,arguments)}};define(["underscore","backbone","marionette","loglevel","../../core","../base","./info","./stats","./controls","../charts"],function(t,e,n,i,o,r,s,a,l,c){var u,h,p,d,f,g,m,v,y,_,w,x,b;return m=function(t,e){return"c"+t+"f"+e},v=function(e){var n,i,r,s,a,l;return i=null,r=null,s=[{}],a=o.config.get("fields.instances."+e.id+".form"),t.isFunction(a)?i=a:t.isString(a)?r=a:t.isObject(a)&&s.push(a),l=o.config.get("fields.types."+e.get("logical_type")+".form"),!i&&t.isFunction(l)?i=l:!r&&t.isString(l)?r=l:s.push(l),n=o.config.get("fields.defaults.form"),!i&&t.isFunction(n)?i=n:!r&&t.isString(n)?r=n:s.push(n),s=t.defaults.apply(null,s),{view:i,module:r,options:s}},g=function(t){function e(){return y=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.message="Loading fields...",e}(r.LoadView),h=function(n){function i(){i.__super__.constructor.apply(this,arguments),this.context=this.options.context.define({concept:this.options.context.get("concept"),field:this.model.id},{type:this.options.nodeType})}return __extends(i,n),i.prototype.className="field-form",i.prototype.getTemplate=function(){return this.options.condensed?"field/form-condensed":"field/form"},i.prototype.options={info:!0,chart:!1,stats:!0,controls:!0,condensed:!1,nodeType:"condition"},i.prototype.regions={info:".info-region",stats:".stats-region",chart:".chart-region",controls:".controls-region"},i.prototype.regionViews={info:s.FieldInfo,stats:a.FieldStats,chart:c.FieldChart,controls:l.FieldControls},i.prototype.onRender=function(){var t;return t=this.options.context.get("concept"),this.$el.attr("id",m(t,this.model.id)),this.renderInfo(),this.renderStats(),this.renderControls(),this.renderChart(),this.options.condensed?this.$el.addClass("condensed"):void 0},i.prototype.renderInfo=function(){var e;return this.options.info?(e={model:this.model},t.isObject(this.options.info)&&t.extend(e,this.options.info),this.info.show(new this.regionViews.info(e))):void 0},i.prototype.renderStats=function(){var e;return this.options.stats&&null!=this.model.stats?(e={model:this.model},t.isObject(this.options.stats)&&t.extend(e,this.options.stats),this.stats.show(new this.regionViews.stats(e))):void 0},i.prototype.renderControls=function(){var n,i,o,r,s;if(this.options.controls){for(l=[],s=this.options.controls,o=0,r=s.length;r>o;o++)i=s[o],n={model:this.model,context:this.context},t.isObject(i)?t.extend(n,i):n.control=i,l.push(n);return this.controls.show(new this.regionViews.controls({collection:new e.Collection(l)}))}},i.prototype.renderChart=function(){var e;return this.options.chart&&null!=this.model.links.distribution?(e=this.options.condensed?{chart:{height:100}}:{chart:{height:200}},e.context=this.context,e.model=this.model,t.isObject(this.options.chart)&&t.extend(e,this.options.chart),this.chart.show(new this.regionViews.chart(e))):void 0},i}(n.Layout),u=function(t){function e(){return _=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(r.ErrorView),p=function(e){function n(){return this.createView=__bind(this.createView,this),w=n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.prototype.itemView=h,n.prototype.emptyView=g,n.prototype.errorView=u,n.prototype.collectionEvents={reset:"render"},n.prototype.render=function(){var t=this;return this.collection.length&&this.collection.each(function(e,n){return t.renderItem(e,n)}),this.el},n.prototype.renderItem=function(e,n){var o,r,s=this;return o=t.extend({},this.options,{model:e,context:this.options.context,index:n}),this.collection.length<2?o.info=!1:n>0&&this.options.condense&&(o.condensed=!0),r=v(e),o=t.extend(o,r.options),r.module?require([r.module],function(t){return s.createView(t,o)},function(t){return s.showErrorView(e),i.debug(t)}):this.createView(r.view||this.itemView,o)},n.prototype.createView=function(t,e){var n,i;try{return i=new t(e),i.render(),o.dom.insertAt(this.$el,e.index,i.el)}catch(r){if(n=r,this.showErrorView(e.model),o.config.get("debug"))throw n}},n.prototype.showErrorView=function(t){var e;return e=new this.errorView({model:t}),e.render(),this.$el.html(e.el)},n}(n.View),d=function(t){function e(){return x=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.tagName="li",e.prototype.template="field/link",e.prototype.ui={anchor:"a"},e.prototype.serializeData=function(){return{name:this.model.get("alt_name")||this.model.get("name")}},e}(n.ItemView),f=function(t){function e(){return b=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.template="field/links",e.prototype.itemView=d,e.prototype.itemViewContainer="[data-target=links]",e.prototype.onAfterItemAdded=function(t){var e;return e=this.options.concept.id,t.ui.anchor.attr("href","#"+m(e,t.model.id))},e}(n.CompositeView),{FieldForm:h,FieldFormCollection:p,FieldLinkCollection:f}});
//@ sourceMappingURL=form.js.map