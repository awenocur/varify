var __bind=function(e,t){return function(){return e.apply(t,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};define(["underscore","marionette"],function(e,t){var n;return n=function(t){function n(){return this.onRender=__bind(this.onRender,this),this.onClick=__bind(this.onClick,this),n.__super__.constructor.apply(this,arguments)}return __extends(n,t),n.prototype.tagName="thead",n.prototype.template="varify/tables/header",n.prototype.events={"click th":"onClick"},n.prototype.initialize=function(){this.data={};if(!(this.data.view=this.options.view))throw new Error("view model required")},n.prototype._getConcept=function(e){var t;return t=parseInt(e.getAttribute("data-concept-id")),t!=null&&!isNaN(t)?t:parseInt(e.parentElement.getAttribute("data-concept-id"))},n.prototype.onClick=function(t){var n,r;n=this._getConcept(t.target);if(n==null||isNaN(n))throw new Error("Unrecognized concept ID on column");return r=e.find(this.data.view.facets.models,function(e){return e.get("concept")===n}),r==null&&this.data.view.facets.add({concept:n}),e.each(this.data.view.facets.models,function(e){var t;return e.get("concept")===n?(t=e.get("sort"),t!=null?t.toLowerCase()==="asc"?(e.set("sort","desc"),e.set("sort_index",0)):(e.unset("sort"),e.unset("sort_index")):(e.set("sort","asc"),e.set("sort_index",0))):(e.unset("sort"),e.unset("sort_index"))}),this.data.view.save()},n.prototype.onRender=function(){return e.each(this.data.view.facets.models,function(e){var t,n,r;t=$("th[data-concept-id="+e.get("concept")+"] i");if(t!=null)return t.removeClass("icon-sort icon-sort-up icon-sort-down"),n=(e.get("sort")||"").toLowerCase(),r=function(){switch(n){case"asc":return"icon-sort-up";case"desc":return"icon-sort-down";default:return"icon-sort"}}(),t.addClass(r)})},n}(t.ItemView),{Header:n}})